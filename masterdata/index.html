<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Distordia Product Catalogue - Browse and manage product registers on the Nexus blockchain">
    <title>Product Catalogue | Distordia</title>
    <link rel="icon" type="image/png" href="../images/logo-utentekst.png">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="masterdata.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <a href="../index.html" style="display: flex; align-items: center; gap: 0.8rem; text-decoration: none;">
                    <img src="../images/logo-utentekst.png" alt="Distordia Logo" class="logo-img">
                    <span class="logo-text">DISTORDIA</span>
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="../index.html">Home</a></li>
                <li><a href="../index.html#about">About</a></li>
                <li class="dropdown">
                    <a href="#">dApps ‚ñæ</a>
                    <div class="dropdown-menu">
                        <a href="../dex/index.html" class="dropdown-item">DEX</a>
                        <a href="index.html" class="dropdown-item active">Master Data</a>
                        <a href="../q-wallet/index.html" class="dropdown-item">Q-Wallet Plugin</a>
                        <div class="dropdown-divider"></div>
                        <span class="dropdown-header">Projects</span>
                        <a href="../swap/index.html" class="dropdown-item">Stablecoin Bridge</a>
                        <a href="../content-verification/index.html" class="dropdown-item">Content Verification</a>
                        <a href="../social/index.html" class="dropdown-item">Social</a>
                        <a href="../q-mobile/index.html" class="dropdown-item">Q-Mobile</a>
                        <a href="../verification/index.html" class="dropdown-item">Verification</a>
                        <a href="../nexgo/index.html" class="dropdown-item">NexGo</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#">Modules ‚ñæ</a>
                    <div class="dropdown-menu">
                        <a href="https://github.com/AkstonCap/NexGo" target="_blank" class="dropdown-item">NexGo Module</a>
                        <a href="https://github.com/AkstonCap/DEX" target="_blank" class="dropdown-item">DEX Module</a>
                        <a href="https://github.com/AkstonCap/verificationModule" target="_blank" class="dropdown-item">Verification Module</a>
                    </div>
                </li>
                <li><a href="../standards/index.html">Standards</a></li>
                <li><a href="../index.html#contact">Contact</a></li>
            </ul>
            <div class="auth-controls">
                <button id="connectWalletBtn" class="connect-wallet-btn">Connect Wallet</button>
                <div id="walletInfo" class="wallet-info" style="display: none;">
                    <span id="walletAddress" class="wallet-address"></span>
                    <button id="disconnectBtn" class="disconnect-btn">Disconnect</button>
                </div>
            </div>
            <div class="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <section class="products-section">
        <div class="container">
            <!-- Value Proposition Banner -->
            <div class="value-banner">
                <h2>üåê Global Master Data on Blockchain</h2>
                <p class="value-description">
                    Stop maintaining separate product databases in every ERP system. Register products once on the blockchain, 
                    reference them everywhere. Immutable, transparent, and universally accessible material master data for modern supply chains.
                </p>
                <div class="benefits">
                    <div class="benefit-item">
                        <span class="benefit-icon">‚úì</span>
                        <span>One source of truth</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">‚úì</span>
                        <span>No data silos</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">‚úì</span>
                        <span>Immutable records</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">‚úì</span>
                        <span>Universal reference</span>
                    </div>
                </div>
            </div>

            <!-- Header Controls -->
            <div class="products-header">
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="Search products, materials, SKUs..." />
                    <button id="searchBtn" class="btn-search">Search</button>
                </div>
                <div class="header-buttons">
                    <button id="infoBtn" class="btn-secondary" title="How it Works">
                        ‚ÑπÔ∏è How it Works
                    </button>
                    <button id="addProductBtn" class="btn-primary" style="display: none;">
                        <span class="icon">+</span> Register Material
                    </button>
                </div>
            </div>

            <!-- Filter Panel -->
            <div class="filter-panel">
                <div class="filter-group">
                    <label>Category:</label>
                    <input type="text" id="categoryFilter" placeholder="Filter by category...">
                </div>
                <div class="filter-group">
                    <label>Owner:</label>
                    <select id="ownerFilter">
                        <option value="">All Products</option>
                        <option value="mine">My Products</option>
                    </select>
                </div>
                <button id="clearFiltersBtn" class="btn-secondary">Clear Filters</button>
            </div>

            <!-- Products Grid -->
            <div id="productsGrid" class="products-grid">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>Loading products from blockchain...</p>
                </div>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <div class="empty-icon">üì¶</div>
                <h3>No Materials Found</h3>
                <p>Connect your wallet to register materials as global master data on the blockchain</p>
            </div>
        </div>
    </section>

    <!-- Product Registration Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Register Material as Master Data</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="productForm">
                    <!-- Section: Identification -->
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <span class="section-icon">üè∑Ô∏è</span> Identification
                            <button type="button" class="info-tooltip" data-tooltip="identification">‚ÑπÔ∏è</button>
                        </h3>
                        
                        <div class="form-group">
                            <label for="productArtNr">Article Number (art-nr) *</label>
                            <input type="text" id="productArtNr" required maxlength="50" placeholder="e.g., BV-DN25-TH">
                            <small class="form-hint">Your internal article/part number for this product</small>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="productGTIN">GTIN (Global Trade Item Number)</label>
                                <input type="text" id="productGTIN" maxlength="14" pattern="[0-9]{8,14}" placeholder="e.g., 00012345678905">
                                <small class="form-hint">8-14 digit barcode (EAN/UPC/GTIN)</small>
                            </div>
                            <div class="form-group">
                                <label for="productBrand">Brand</label>
                                <input type="text" id="productBrand" maxlength="50" placeholder="e.g., FlowMaster">
                                <small class="form-hint">Brand name (if different from manufacturer)</small>
                            </div>
                        </div>
                    </div>

                    <!-- Section: Classification -->
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <span class="section-icon">üìÇ</span> Classification
                            <button type="button" class="info-tooltip" data-tooltip="classification">‚ÑπÔ∏è</button>
                        </h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="productCategory">Category *</label>
                                <input type="text" id="productCategory" required maxlength="50" placeholder="e.g., Piping">
                                <small class="form-hint">Main product category</small>
                            </div>
                            <div class="form-group">
                                <label for="productSubcategory">Subcategory</label>
                                <input type="text" id="productSubcategory" maxlength="50" placeholder="e.g., Valves">
                                <small class="form-hint">More specific classification</small>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="productGPC">GPC Code</label>
                                <input type="text" id="productGPC" maxlength="8" pattern="[0-9]{8}" placeholder="e.g., 40161500">
                                <small class="form-hint">GS1 Global Product Classification (8 digits)</small>
                            </div>
                            <div class="form-group">
                                <label for="productHSCode">HS Code</label>
                                <input type="text" id="productHSCode" maxlength="10" pattern="[0-9]{6,10}" placeholder="e.g., 848180">
                                <small class="form-hint">Harmonized System code for trade (6-10 digits)</small>
                            </div>
                        </div>
                    </div>

                    <!-- Section: Description -->
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <span class="section-icon">üìù</span> Product Information
                            <button type="button" class="info-tooltip" data-tooltip="description">‚ÑπÔ∏è</button>
                        </h3>

                        <div class="form-group">
                            <label for="productDescription">Description *</label>
                            <input type="text" id="productDescription" required maxlength="100" placeholder="e.g., Ball Valve DN25 Threaded Brass">
                            <small class="form-hint">Concise product description (max 100 characters)</small>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="productManufacturer">Manufacturer *</label>
                                <input type="text" id="productManufacturer" required maxlength="50" placeholder="e.g., Distordia">
                                <small class="form-hint">Manufacturer name or GLN</small>
                            </div>
                            <div class="form-group">
                                <label for="productOrigin">Country of Origin</label>
                                <select id="productOrigin">
                                    <option value="">Select country</option>
                                    <option value="CN">China (CN)</option>
                                    <option value="DE">Germany (DE)</option>
                                    <option value="IN">India (IN)</option>
                                    <option value="IT">Italy (IT)</option>
                                    <option value="JP">Japan (JP)</option>
                                    <option value="KR">South Korea (KR)</option>
                                    <option value="MX">Mexico (MX)</option>
                                    <option value="NL">Netherlands (NL)</option>
                                    <option value="NO">Norway (NO)</option>
                                    <option value="PL">Poland (PL)</option>
                                    <option value="US">United States (US)</option>
                                    <option value="GB">United Kingdom (GB)</option>
                                    <option value="OTHER">Other</option>
                                </select>
                                <small class="form-hint">ISO 3166-1 alpha-2 country code</small>
                            </div>
                        </div>
                    </div>

                    <!-- Section: Physical Properties -->
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <span class="section-icon">‚öñÔ∏è</span> Physical Properties
                            <button type="button" class="info-tooltip" data-tooltip="physical">‚ÑπÔ∏è</button>
                        </h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="productUOM">Unit of Measure (UOM) *</label>
                                <select id="productUOM" required>
                                    <option value="">Select unit</option>
                                    <option value="EA">Each (EA)</option>
                                    <option value="PC">Piece (PC)</option>
                                    <option value="SET">Set (SET)</option>
                                    <option value="PR">Pair (PR)</option>
                                    <option value="KG">Kilogram (KG)</option>
                                    <option value="GRM">Gram (GRM)</option>
                                    <option value="LTR">Liter (LTR)</option>
                                    <option value="MTR">Meter (MTR)</option>
                                    <option value="MTK">Square Meter (MTK)</option>
                                    <option value="MTQ">Cubic Meter (MTQ)</option>
                                    <option value="TNE">Metric Ton (TNE)</option>
                                    <option value="BX">Box (BX)</option>
                                    <option value="CT">Carton (CT)</option>
                                    <option value="PF">Pallet (PF)</option>
                                </select>
                                <small class="form-hint">UN/CEFACT standard unit codes</small>
                            </div>
                            <div class="form-group">
                                <label for="productWeight">Weight (grams)</label>
                                <input type="number" id="productWeight" step="1" min="0" placeholder="e.g., 2320">
                                <small class="form-hint">Net weight per unit in grams</small>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="productHazardous">
                                    <span>‚ö†Ô∏è Hazardous Material</span>
                                </label>
                                <small class="form-hint">Dangerous goods flag</small>
                            </div>
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="productPerishable">
                                    <span>‚ùÑÔ∏è Perishable</span>
                                </label>
                                <small class="form-hint">Temperature-sensitive product</small>
                            </div>
                        </div>

                        <div class="form-group" id="shelfLifeGroup" style="display: none;">
                            <label for="productShelfLife">Shelf Life (days)</label>
                            <input type="number" id="productShelfLife" min="1" placeholder="e.g., 90">
                            <small class="form-hint">Number of days product remains usable</small>
                        </div>
                    </div>

                    <!-- Section: References -->
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <span class="section-icon">üîó</span> External References
                            <button type="button" class="info-tooltip" data-tooltip="references">‚ÑπÔ∏è</button>
                        </h3>

                        <div class="form-group">
                            <label for="productURL">Product URL</label>
                            <input type="text" id="productURL" maxlength="100" placeholder="e.g., distordia.com/products/bv-dn25">
                            <small class="form-hint">Link to extended product information (no https://)</small>
                        </div>

                        <div class="form-group">
                            <label for="productReplaces">Replaces (Blockchain Address)</label>
                            <input type="text" id="productReplaces" maxlength="128" placeholder="e.g., a1b2c3...">
                            <small class="form-hint">Address of superseded product (if applicable)</small>
                        </div>
                    </div>
                    <!-- Blockchain Info Box -->
                    <div class="blockchain-info">
                        <p><strong>üí° Asset Size Limit:</strong> Nexus assets are limited to 1KB. This form captures essential master data attributes (~500 bytes). Extended specifications should be stored off-chain and linked via the URL field.</p>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary modal-cancel">Cancel</button>
                        <button type="submit" class="btn-primary" id="submitProductBtn">
                            <span class="btn-text">Register as Global Master Data</span>
                            <span class="btn-loading" style="display: none;">
                                <span class="spinner-small"></span> Processing...
                            </span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div id="productDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Product Details</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="productDetailContent">
                    <!-- Product details will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="editProductBtn" class="btn-secondary" style="display: none;">Edit Product</button>
                <button id="transferProductBtn" class="btn-secondary" style="display: none;">Transfer Ownership</button>
                <button class="btn-primary modal-close">Close</button>
            </div>
        </div>
    </div>

    <!-- Info/Whitepaper Modal -->
    <div id="infoModal" class="modal">
        <div class="modal-content modal-wide">
            <div class="modal-header">
                <h2>üìã Distordia Master Data - How it Works</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body info-modal-body">
                <div class="info-content">
                    <section class="info-section">
                        <h3>üéØ The Problem We Solve</h3>
                        <p>Every company maintains their own master data for products and materials. When businesses trade, they waste time mapping between different systems. A product exists with different IDs, descriptions, and attributes across suppliers, manufacturers, and retailers.</p>
                    </section>

                    <section class="info-section">
                        <h3>üí° The Blockchain Solution</h3>
                        <p>This catalogue creates <strong>globally unique, blockchain-verified master data</strong> that any company can reference. Each product becomes a tamper-proof NFT with a permanent address. Any ERP or MRP system can query the blockchain for authoritative product information.</p>
                    </section>

                    <section class="info-section">
                        <h3>üì¶ On-Chain Attribute Schema</h3>
                        <p>Our schema is based on global ERP standards (SAP, Oracle) and international specifications (GS1, UN/CEFACT, ISO). Each asset is limited to <strong>1KB</strong> on Nexus blockchain.</p>
                        
                        <div class="attribute-table">
                            <h4>üè∑Ô∏è Identification Attributes</h4>
                            <table>
                                <tr><th>Attribute</th><th>Description</th><th>Standard</th></tr>
                                <tr><td><code>art-nr</code></td><td>Internal article/part number</td><td>Free text</td></tr>
                                <tr><td><code>GTIN</code></td><td>Global Trade Item Number (barcode)</td><td>GS1 (8-14 digits)</td></tr>
                                <tr><td><code>brand</code></td><td>Brand name if different from manufacturer</td><td>Free text</td></tr>
                            </table>

                            <h4>üìÇ Classification Attributes</h4>
                            <table>
                                <tr><th>Attribute</th><th>Description</th><th>Standard</th></tr>
                                <tr><td><code>category</code></td><td>Human-readable product category</td><td>Free text</td></tr>
                                <tr><td><code>subcategory</code></td><td>More specific classification</td><td>Free text</td></tr>
                                <tr><td><code>GPC</code></td><td>GS1 Global Product Classification</td><td>8-digit code</td></tr>
                                <tr><td><code>HSCode</code></td><td>Harmonized System code for international trade</td><td>6-10 digits</td></tr>
                            </table>

                            <h4>üìù Description Attributes</h4>
                            <table>
                                <tr><th>Attribute</th><th>Description</th><th>Standard</th></tr>
                                <tr><td><code>description</code></td><td>Short product description (‚â§100 chars)</td><td>Free text</td></tr>
                                <tr><td><code>manufacturer</code></td><td>Manufacturer name or GLN</td><td>Free text / GS1 GLN</td></tr>
                                <tr><td><code>origin</code></td><td>Country of origin</td><td>ISO 3166-1 alpha-2</td></tr>
                            </table>

                            <h4>‚öñÔ∏è Physical Property Attributes</h4>
                            <table>
                                <tr><th>Attribute</th><th>Description</th><th>Standard</th></tr>
                                <tr><td><code>UOM</code></td><td>Base unit of measure</td><td>UN/CEFACT codes</td></tr>
                                <tr><td><code>weight</code></td><td>Net weight per unit in grams</td><td>Integer</td></tr>
                                <tr><td><code>hazardous</code></td><td>Dangerous goods flag</td><td>Boolean</td></tr>
                                <tr><td><code>perishable</code></td><td>Temperature-sensitive product</td><td>Boolean</td></tr>
                                <tr><td><code>shelflife</code></td><td>Shelf life in days (if perishable)</td><td>Integer</td></tr>
                            </table>

                            <h4>üîó Reference Attributes</h4>
                            <table>
                                <tr><th>Attribute</th><th>Description</th><th>Standard</th></tr>
                                <tr><td><code>url</code></td><td>Link to extended product info</td><td>URL (no https://)</td></tr>
                                <tr><td><code>replaces</code></td><td>Blockchain address of superseded product</td><td>Nexus address</td></tr>
                            </table>

                            <h4>üîí System Attributes (Auto-Generated by Nexus)</h4>
                            <table>
                                <tr><th>Attribute</th><th>Description</th></tr>
                                <tr><td><code>address</code></td><td>Unique blockchain identifier for this asset</td></tr>
                                <tr><td><code>owner</code></td><td>Blockchain address of asset owner</td></tr>
                                <tr><td><code>created</code></td><td>Unix timestamp of asset creation</td></tr>
                                <tr><td><code>modified</code></td><td>Unix timestamp of last modification</td></tr>
                                <tr><td><code>version</code></td><td>Asset version number (increments on update)</td></tr>
                            </table>

                            <h4>üè∑Ô∏è Distordia Standard Attributes</h4>
                            <table>
                                <tr><th>Attribute</th><th>Description</th><th>Values</th></tr>
                                <tr><td><code>distordia-type</code></td><td>Asset type identifier</td><td><code>product</code></td></tr>
                                <tr><td><code>distordia-status</code></td><td>Lifecycle status</td><td><code>valid</code>, <code>discontinued</code>, <code>recalled</code></td></tr>
                            </table>
                        </div>
                    </section>

                    <section class="info-section">
                        <h3>üíæ What Stays Off-Chain?</h3>
                        <p>Due to the 1KB asset limit, the following should be stored in your private systems and linked via the <code>url</code> field:</p>
                        <ul>
                            <li><strong>Pricing</strong> - List prices, customer-specific prices, discounts</li>
                            <li><strong>Inventory</strong> - Stock levels, warehouse locations, reorder points</li>
                            <li><strong>Media</strong> - Product images, videos, 3D models, PDFs</li>
                            <li><strong>Long Descriptions</strong> - Marketing text, translations, detailed specs</li>
                            <li><strong>Supplier Data</strong> - Lead times, MOQs, supplier-specific codes</li>
                            <li><strong>Compliance</strong> - Certificates, SDS documents (store link only)</li>
                        </ul>
                    </section>

                    <section class="info-section">
                        <h3>üè≠ Use Cases</h3>
                        <ul>
                            <li><strong>Manufacturer</strong>: Register your products once - all resellers reference the same master data</li>
                            <li><strong>Supplier</strong>: Import blockchain-verified material specs into your ERP automatically</li>
                            <li><strong>Retailer</strong>: Trust product authenticity from verified manufacturers</li>
                            <li><strong>Supply Chain</strong>: Track materials through the supply chain with immutable records</li>
                        </ul>
                    </section>

                    <section class="info-section">
                        <h3>üîó ERP Integration</h3>
                        <p>Your ERP/MRP system can query the Nexus blockchain API to import verified product data:</p>
                        <pre><code>POST https://api.distordia.com/register/list/assets:asset
{
  "where": "results.distordia-type=product AND results.distordia-status=valid"
}</code></pre>
                        <p>Each product returns complete master data including blockchain address for unique reference.
                            To get details of a specific product by its blockchain address:</p>
                        <pre><code>POST https://api.distordia.com/register/get/assets:asset
{
  "address": "&lt;product_blockchain_address&gt;"
}</code></pre>
                    </section>

                    <section class="info-section">
                        <h3>üìã Example Asset JSON</h3>
                        <pre><code>{
  "owner": "a164ce40f952...",
  "version": 1,
  "created": 1766848496,
  "modified": 1766848496,
  "type": "OBJECT",
  "form": "ASSET",
  "distordia-type": "product",
  "distordia-status": "valid",
  "art-nr": "BV-DN25-TH",
  "GTIN": "00012345678905",
  "category": "Piping",
  "subcategory": "Valves",
  "GPC": "40161500",
  "HSCode": "848180",
  "description": "Ball Valve DN25 Threaded Brass",
  "manufacturer": "Distordia",
  "brand": "FlowMaster",
  "origin": "DE",
  "UOM": "EA",
  "weight": 2320,
  "hazardous": false,
  "perishable": false,
  "url": "distordia.com/products/bv-dn25"
}</code></pre>
                    </section>

                    <section class="info-section">
                        <h3>üöÄ Getting Started</h3>
                        <ol>
                            <li><strong>Connect Wallet</strong>: Click "Connect Q-Wallet" in the top navigation</li>
                            <li><strong>Register Material</strong>: Click "+ Register Material" and fill in product details</li>
                            <li><strong>Reference Anywhere</strong>: Use the blockchain address in your ERP systems</li>
                        </ol>
                    </section>

                    <section class="info-section">
                        <h3>üîÆ Built on Nexus Blockchain</h3>
                        <p>This dApp runs on the <a href="https://nexus.io" target="_blank">Nexus blockchain</a>, providing enterprise-grade security, low transaction fees, and a quantum-resistant architecture for long-term data integrity.</p>
                    </section>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary modal-close">Got it!</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="../images/logo-utentekst.png" alt="Distordia Logo" class="footer-logo-img">
                    <span class="footer-logo-text">DISTORDIA</span>
                </div>
                <p>&copy; 2025 Distordia Labs. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
    <script src="auth.js"></script>
    <script src="api.js"></script>
    <script src="masterdata.js"></script>
</body>
</html>
